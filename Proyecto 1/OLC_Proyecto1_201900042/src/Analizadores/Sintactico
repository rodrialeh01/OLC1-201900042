package analizadores; 
import Clases.ErrorLenguaje;
import java_cup.runtime.*;
import Structures.Instrucciones.Comentarios;
import Structures.Instrucciones.Declaracion;
import Structures.Instrucciones.Instruccion;
import Structures.Instrucciones.Operacion;
import Structures.Instrucciones.Si;
import Structures.Instrucciones.Main;
import Structures.Instrucciones.Asignacion;
import Structures.Instrucciones.Case;
import Structures.Instrucciones.SeleccionMultiple;
import Structures.Instrucciones.Para;
import Structures.Instrucciones.Mientras;
import Structures.Instrucciones.Repetir;
import Structures.Instrucciones.Impresion;
import Structures.Instrucciones.Ejecutar;
import Structures.Instrucciones.Parametro;
import Structures.Instrucciones.Funciones;
import Structures.Instrucciones.Metodo;
import Structures.Instrucciones.Retornar;
import Structures.Instrucciones.Osi;
import java.util.LinkedList;
import Structures.Nodo;
import Structures.Arbol;


parser code 
{:
    /**
    *Listas
    **/
    public LinkedList<ErrorLenguaje> ErroresSintacticos = new LinkedList<ErrorLenguaje>();
    public LinkedList<Instruccion> TraduccionGo = new LinkedList<Instruccion>();
    public LinkedList<Instruccion> TraduccionPy = new LinkedList<Instruccion>();
    public String mensajeError = "";
    public int auxfila, auxcolumna;
    public String auxerror = ""; 
    /**
     * Método al que se llama automáticamente ante algún error sintactico.
     **/ 
    public void syntax_error(Symbol s){
        String lexema = s.value.toString();
        auxerror = lexema;
        int fila = s.right;
        auxfila=fila;
        int columna = s.left;
        auxcolumna = columna;
        
        ErroresSintacticos.add(new ErrorLenguaje("Sintáctico","Carácter no esperado: "+lexema,fila,columna));
        mensajeError += "Error Sintáctico en la Línea " + (s.left) + " Columna "+s.right+ ". No se esperaba este componente: " +s.value+".\n";
        System.out.println("Error Sintáctico en la Línea " + (s.left) +
        " Columna "+s.right+ ". No se esperaba este componente: " +s.value+"."); 
    } 

    /**
     * Método al que se llama automáticamente ante algún error sintáctico 
     * en el que ya no es posible una recuperación de errores.
     **/ 
    public void unrecovered_syntax_error(Symbol s) throws java.lang.Exception{ 
        String lexema = s.value.toString();
        auxerror=lexema;
        int fila = s.right;
        auxfila=fila;
        int columna = s.left;
        
        ErroresSintacticos.add(new ErrorLenguaje("Sintáctico","Error irrecuperable: "+ lexema,fila,columna));
        System.out.println("--------------- Error Sintactico, Panic Mode -------------------");
        System.out.println("\t\tLexema: "+ lexema);
        System.out.println("\t\tFila: "+ fila);
        System.out.println("\t\tColumna: "+ columna);
    }
:} 

terminal String RINICIO,RFIN,RMETODO,RFINMETODO,RFUNCION,RFINFUNCION,RCONPARAMETROS,RRETORNAR,RINGRESAR,RCOMO,RCONVALOR,RSI,RENTONCES,ROSI,RDELOCONTRARIO,RFINSI,RSEGUN,RHACER,RFINSEGUN;
terminal String COMENTARIOL,COMENTARIOML,RPARA,RHASTA,RCONINCREMENTAL,RFINPARA,RMIENTRAS,RFINMIENTRAS,RREPETIR,RHASTAQUE,REJECUTAR,RIMPRIMIR,RIMPRIMIRNL;
terminal String IDENTIFICADOR;
terminal String ENTERO;
terminal String CARASCCI;
terminal String CADENA;
terminal String CARACTER;
terminal String DECIMAL;
terminal String SUMA,RESTA,MULTIPLICACION,DIVIDIR,MODU,POTENCIA;
terminal String RMAYOR,RMENOR,RMAYOROIGUAL,RMENOROIGUAL,RESIGUAL,RESDIFERENTE,ROR,RAND,RNOT;
terminal String RNUMERO,RCADENA,RBOOLEAN,RCARACTER;
terminal String RVERDADERO,RFALSO;
terminal String PARIZQ,PARDER,INTABRE,INTCIERRA,FLECHA,PTCOMA,COMA,CORIZQ,CORDER;

non terminal INICIO;
non terminal INSTRUCCIONES;
non terminal DECLARACION;
non terminal LinkedList<Instruccion> LISTA_IDENTIFICADORES;
non terminal ASIGNACION;
non terminal EXPRESION;
non terminal TIPODATO;
non terminal FUNCION;
non terminal METODO;
non terminal GLOBAL;
non terminal LinkedList <Instruccion> LISTA_PARAMETROS;
non terminal ENTORNO_LOCAL;
non terminal CONDICIONAL_SI;
non terminal CONDICION;
non terminal LinkedList<Instruccion> LOCAL;
non terminal LinkedList<Instruccion> LISTA_OSI;
non terminal SELECCION_MULTIPLE;
non terminal LinkedList<Instruccion> LISTA_VALORENTONCES;
non terminal CICLO_PARA;
non terminal CICLO_MIENTRAS;
non terminal CICLO_REPETIR;
non terminal EJECUTAR;
non terminal IMPRESION;
non terminal IMPRESION_CONSALTO;
non terminal LinkedList<Instruccion> ALGORITMO;
non terminal MAIN;
non terminal COMENTARIOS;
non terminal COMENTARIO;
non terminal LinkedList<Instruccion> INSERCION_PARAMETROS;
non terminal EJECUTAR_2;
non terminal RELACIONAL;
non terminal FYM;
non terminal AGRUPACION;

precedence left SUMA,RESTA;
precedence left MULTIPLICACION,DIVIDIR;
precedence left POTENCIA,MODU;

//-------------------------------------------GRAMATICA SINTACTICA-------------------------------------------------
start with INICIO; 

INICIO::=INSTRUCCIONES                                                                                                                                                             
;
INSTRUCCIONES::=MAIN                                                                                  
               |COMENTARIOS                                                                           
               |error                                                                                   
;
MAIN::=RINICIO ALGORITMO:a RFIN                                                                         {:
                                                                                                            RESULT=(LinkedList) a;
                                                                                                            Main m = new Main((LinkedList) a);
                                                                                                            TraduccionGo.addFirst((Instruccion) m);
                                                                                                            TraduccionPy.addLast((Instruccion) m);
                                                                                                        :}                                                         
      |RINICIO RFIN                                                                                     {:
                                                                                                            Main.importacion_print = false;
                                                                                                            Main.importacion_potencia = false;
                                                                                                            RESULT=new Main();
                                                                                                            TraduccionGo.add((Main) RESULT);
                                                                                                            TraduccionPy.add((Main) RESULT);
                                                                                                        :}
      |error RFIN{:ErroresSintacticos.add(new ErrorLenguaje("Sintáctico","Existe un error sintactico,  carácter recuperado: "+auxerror,auxfila,auxcolumna));:}
;
COMENTARIOS::=COMENTARIOS COMENTARIO
             |COMENTARIO
;
COMENTARIO::=COMENTARIOL:a                                                                              {:  
                                                                                                            RESULT=new Comentarios(Comentarios.Tipo_Comentario.COMENTARIO_UNILINEA, a);
                                                                                                            TraduccionGo.add((Comentarios) RESULT);
                                                                                                            TraduccionPy.add((Comentarios) RESULT);
                                                                                                        :}
            |COMENTARIOML:a                                                                             {:  
                                                                                                            RESULT=new Comentarios(Comentarios.Tipo_Comentario.COMENTARIO_MILTILINEA, a);
                                                                                                            TraduccionGo.add((Comentarios) RESULT);
                                                                                                            TraduccionPy.add((Comentarios) RESULT);
                                                                                                        :}
;
ALGORITMO::=ALGORITMO:a GLOBAL:b                                                                        {:  
                                                                                                            RESULT = new LinkedList<Instruccion>();
                                                                                                            for (int i = 0; i < a.size(); i++) {
                                                                                                                RESULT.add(a.get(i));
                                                                                                            }
                                                                                                            if(b != null){
                                                                                                                RESULT.add((Instruccion) b);
                                                                                                            }
                                                                                                        :}                                                                                     
           |GLOBAL:a                                                                                    {:  
                                                                                                            if(a != null){
                                                                                                                RESULT= new LinkedList<Instruccion>();
                                                                                                                RESULT.add((Instruccion) a);
                                                                                                            }
                                                                                                        :}
;
GLOBAL::= ENTORNO_LOCAL:a                                                                               {:  
                                                                                                            RESULT= (Instruccion) a;
                                                                                                            
                                                                                                        :}
         |FYM:a                                                                                         {:  
                                                                                                            TraduccionGo.addLast((Instruccion) a);
                                                                                                            TraduccionPy.add((Instruccion) a);
                                                                                                        :}
;
FYM::=FUNCION:a                                                                                         {:  
                                                                                                            RESULT = (Funciones) a;
                                                                                                        :}
     |METODO:a                                                                                          {:  
                                                                                                            RESULT = (Metodo) a;
                                                                                                        :}
;
DECLARACION::=RINGRESAR LISTA_IDENTIFICADORES:l RCOMO TIPODATO:b RCONVALOR CONDICION:e PTCOMA           {:  
                                                                                                            RESULT=new Declaracion((Parametro.Tipo_Variable) b,(Operacion)e,(LinkedList)l);
                                                                                                        :}
;
LISTA_IDENTIFICADORES::=LISTA_IDENTIFICADORES:a COMA IDENTIFICADOR:b                                    {:  
                                                                                                            RESULT = new LinkedList<>();
                                                                                                            for (int i = 0; i < a.size(); i++) {
                                                                                                                RESULT.add(a.get(i));
                                                                                                            }
                                                                                                            RESULT.add(new Operacion(b,Operacion.Tipo_operacion.IDENTIFICADOR));
                                                                                                        :} 
                       |IDENTIFICADOR:a                                                                 {:  
                                                                                                            RESULT= new LinkedList<Instruccion>();
                                                                                                            RESULT.add(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR));
                                                                                                        :}
;
EXPRESION::=ENTERO:a                                                                                    {:  
                                                                                                            RESULT=new Operacion(a,Operacion.Tipo_operacion.NUMERO);
                                                                                                        :}
            |DECIMAL:a                                                                                  {:  
                                                                                                            RESULT=new Operacion(a,Operacion.Tipo_operacion.DECIMAL);
                                                                                                        :}
            |CADENA:a                                                                                   {:  
                                                                                                            RESULT=new Operacion(a,Operacion.Tipo_operacion.CADENA);
                                                                                                        :}
            |CARACTER:a                                                                                 {:  
                                                                                                            RESULT=new Operacion(a,Operacion.Tipo_operacion.CARACTER);
                                                                                                        :}
            |CARASCCI:a                                                                                 {:  
                                                                                                            RESULT=new Operacion(a,Operacion.Tipo_operacion.ASCCI);
                                                                                                        :}
            |RVERDADERO:a                                                                               {:  
                                                                                                            RESULT=new Operacion(a,Operacion.Tipo_operacion.VERDADERO);
                                                                                                        :}
            |RFALSO:a                                                                                   {:  
                                                                                                            RESULT=new Operacion(a,Operacion.Tipo_operacion.FALSO);
                                                                                                        :}
            |IDENTIFICADOR:a                                                                            {:  
                                                                                                            RESULT=new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR);
                                                                                                        :}
            |RESTA EXPRESION:a                                                                          {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,Operacion.Tipo_operacion.NEGATIVO);
                                                                                                        :}
            |EXPRESION:a SUMA EXPRESION:b                                                               {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,(Operacion)b,Operacion.Tipo_operacion.SUMA);
                                                                                                        :} 
            |EXPRESION:a RESTA EXPRESION:b                                                              {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,(Operacion)b,Operacion.Tipo_operacion.RESTA);
                                                                                                        :} 
            |EXPRESION:a MULTIPLICACION EXPRESION:b                                                     {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,(Operacion)b,Operacion.Tipo_operacion.MULTIPLICACION);
                                                                                                        :} 
            |EXPRESION:a DIVIDIR EXPRESION:b                                                            {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,(Operacion)b,Operacion.Tipo_operacion.DIVISION);
                                                                                                        :}        
            |EXPRESION:a POTENCIA CORIZQ EXPRESION:b CORDER                                             {:  
                                                                                                            Main.importacion_potencia = true;
                                                                                                            RESULT=new Operacion((Instruccion)a,(Instruccion)b,Operacion.Tipo_operacion.POTENCIA);
                                                                                                        :} 
            |EXPRESION:a MODU EXPRESION:b                                                               {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,(Instruccion)b,Operacion.Tipo_operacion.MODULAR);
                                                                                                        :}
            |AGRUPACION:a                                                                               {:  
                                                                                                            RESULT=(Instruccion)a;
                                                                                                        :}  
            |EJECUTAR_2:a                                                                               {:  
                                                                                                            RESULT=(Instruccion) a;
                                                                                                        :}
;
RELACIONAL::=EXPRESION:a                                                                                {:  
                                                                                                            RESULT=(Operacion) a;
                                                                                                        :}
           |EXPRESION:a RMAYOR EXPRESION:b                                                              {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,(Instruccion)b,Operacion.Tipo_operacion.MAYORQUE);;
                                                                                                        :}
           |EXPRESION:a RMENOR EXPRESION:b                                                              {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,(Instruccion)b,Operacion.Tipo_operacion.MENORQUE);;
                                                                                                        :}
           |EXPRESION:a RMAYOROIGUAL EXPRESION:b                                                        {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,(Instruccion)b,Operacion.Tipo_operacion.MAYOROIGUAL);;
                                                                                                        :}
           |EXPRESION:a RMENOROIGUAL EXPRESION:b                                                        {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,(Instruccion)b,Operacion.Tipo_operacion.MENOROIGUAL);;
                                                                                                        :}
           |EXPRESION:a RESIGUAL EXPRESION:b                                                            {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,(Instruccion)b,Operacion.Tipo_operacion.IGUAL);;
                                                                                                        :}
           |EXPRESION:a RESDIFERENTE EXPRESION:b                                                        {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,(Instruccion)b,Operacion.Tipo_operacion.DIFERENTE);;
                                                                                                        :}
;
CONDICION::=RELACIONAL:a ROR RELACIONAL:b                                                               {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,(Instruccion)b,Operacion.Tipo_operacion.OR);;
                                                                                                        :}
           |RELACIONAL:a RAND RELACIONAL:b                                                              {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,(Instruccion)b,Operacion.Tipo_operacion.AND);;
                                                                                                        :}
           |RNOT RELACIONAL:a                                                                           {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,Operacion.Tipo_operacion.NOT);;
                                                                                                        :}
           |RELACIONAL:a                                                                                {:  
                                                                                                            RESULT=(Operacion)a;
                                                                                                        :}
;
AGRUPACION::=PARIZQ CONDICION:a PARDER                                                                  {:  
                                                                                                            RESULT=new Operacion((Instruccion)a,Operacion.Tipo_operacion.AGRUPACION);
                                                                                                        :}
;
ASIGNACION::=LISTA_IDENTIFICADORES:l FLECHA EXPRESION:e PTCOMA                                          {:  
                                                                                                            RESULT=new Asignacion((Instruccion)e,(LinkedList)l);
                                                                                                        :}
;
FUNCION::=RFUNCION IDENTIFICADOR:a TIPODATO:b LOCAL:c RRETORNAR CONDICION:d PTCOMA RFINFUNCION          {:  
                                                                                                            RESULT=new Funciones(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR), (Parametro.Tipo_Variable) b, new Retornar((Operacion) d) , (LinkedList) c);
                                                                                                        :}
         |RFUNCION IDENTIFICADOR:a TIPODATO:b RRETORNAR CONDICION:c PTCOMA RFINFUNCION                  {:  
                                                                                                            RESULT=new Funciones(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR), (Parametro.Tipo_Variable) b, new Retornar((Operacion) c));
                                                                                                        :}
         |RFUNCION IDENTIFICADOR:a TIPODATO:b RCONPARAMETROS PARIZQ LISTA_PARAMETROS:l PARDER LOCAL:c RRETORNAR CONDICION:d PTCOMA RFINFUNCION{:  
                                                                                                            RESULT=new Funciones(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR), (Parametro.Tipo_Variable) b,(LinkedList) l, (LinkedList) c, new Retornar((Operacion) d));
                                                                                                        :}
         |RFUNCION IDENTIFICADOR:a TIPODATO:b RCONPARAMETROS PARIZQ LISTA_PARAMETROS:l PARDER RRETORNAR CONDICION:c PTCOMA RFINFUNCION{:  
                                                                                                            RESULT=new Funciones(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR), (Parametro.Tipo_Variable) b,(LinkedList) l, new Retornar((Operacion) c));
                                                                                                        :}
         |error RFINFUNCION{:ErroresSintacticos.add(new ErrorLenguaje("Sintáctico","Se esperaba palabra reservada FUNCION, carácter recuperado: "+auxerror,auxfila,auxcolumna));:}
;
METODO::=RMETODO IDENTIFICADOR:a LOCAL:b RFINMETODO                                                     {:  
                                                                                                            RESULT=new Metodo((LinkedList) b ,new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR));
                                                                                                        :}
        |RMETODO IDENTIFICADOR:a RFINMETODO                                                             {:  
                                                                                                            RESULT=new Metodo(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR));
                                                                                                        :}
        |RMETODO IDENTIFICADOR:a RCONPARAMETROS PARIZQ LISTA_PARAMETROS:l PARDER LOCAL:b RFINMETODO     {:  
                                                                                                            RESULT=new Metodo(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR),(LinkedList) l, (LinkedList) b);
                                                                                                        :}
        |RMETODO IDENTIFICADOR:a RCONPARAMETROS PARIZQ LISTA_PARAMETROS:l PARDER RFINMETODO             {:  
                                                                                                            RESULT=new Metodo(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR),(LinkedList) l);
                                                                                                        :}
        |error RFINMETODO{:ErroresSintacticos.add(new ErrorLenguaje("Sintáctico","Se esperaba palabra reservada METODO, carácter recuperado: "+auxerror,auxfila,auxcolumna));:}
;
LISTA_PARAMETROS::=LISTA_PARAMETROS:l COMA IDENTIFICADOR:a TIPODATO:b                                   {:  
                                                                                                            RESULT = new LinkedList<>();
                                                                                                            for (int i = 0; i < l.size(); i++) {
                                                                                                                RESULT.add(l.get(i));
                                                                                                            }
                                                                                                            RESULT.add(new Parametro(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR),(Parametro.Tipo_Variable) b));
                                                                                                        :}
                  |IDENTIFICADOR:a TIPODATO:b                                                           {:  
                                                                                                            RESULT= new LinkedList<Instruccion>();
                                                                                                            RESULT.add(new Parametro(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR),(Parametro.Tipo_Variable) b));
                                                                                                        :} 
;
TIPODATO::=RNUMERO:a                                                                                    {:  
                                                                                                            RESULT=Parametro.Tipo_Variable.NUMERO;
                                                                                                        :} 
          |RCADENA:a                                                                                    {:  
                                                                                                            RESULT=Parametro.Tipo_Variable.CADENA;
                                                                                                        :} 
          |RBOOLEAN:a                                                                                   {:  
                                                                                                            RESULT=Parametro.Tipo_Variable.BOOLEAN;
                                                                                                        :} 
          |RCARACTER:a                                                                                  {:  
                                                                                                            RESULT=Parametro.Tipo_Variable.CARACTER;
                                                                                                        :} 
;
LOCAL::=LOCAL:a ENTORNO_LOCAL:b                                                                         {:  
                                                                                                            RESULT = new LinkedList<>();
                                                                                                            for (int i = 0; i < a.size(); i++) {
                                                                                                                RESULT.add(a.get(i));
                                                                                                            }
                                                                                                            RESULT.add((Instruccion) b);
                                                                                                        :}  
       |ENTORNO_LOCAL:a                                                                                 {:  
                                                                                                            RESULT= new LinkedList<Instruccion>();
                                                                                                            RESULT.add((Instruccion) a);
                                                                                                        :} 
;
ENTORNO_LOCAL::=ASIGNACION:a                                                                            {:  
                                                                                                            RESULT= (Instruccion) a;
                                                                                                        :}
               |DECLARACION:a                                                                           {:  
                                                                                                            RESULT= (Instruccion) a;
                                                                                                        :}
               |CONDICIONAL_SI:a                                                                        {:  
                                                                                                            RESULT= (Instruccion) a;
                                                                                                        :}
               |SELECCION_MULTIPLE:a                                                                    {:  
                                                                                                            RESULT= (Instruccion) a;
                                                                                                        :} 
               |CICLO_PARA:a                                                                            {:  
                                                                                                            RESULT= (Instruccion) a;
                                                                                                        :}
               |CICLO_MIENTRAS:a                                                                        {:  
                                                                                                            RESULT= (Instruccion) a;
                                                                                                        :}
               |CICLO_REPETIR:a                                                                         {:  
                                                                                                            RESULT= (Instruccion) a;
                                                                                                        :}
               |EJECUTAR:a                                                                              {:  
                                                                                                            RESULT= (Instruccion) a;
                                                                                                        :}
               |IMPRESION:a                                                                             {:  
                                                                                                            RESULT= (Instruccion) a;
                                                                                                        :}
               |IMPRESION_CONSALTO:a                                                                    {:  
                                                                                                            RESULT= (Instruccion) a;
                                                                                                        :}
               |COMENTARIOL:a                                                                           {:  
                                                                                                            RESULT=new Comentarios(Comentarios.Tipo_Comentario.COMENTARIO_UNILINEA, a);
                                                                                                        :}
               |COMENTARIOML:a                                                                          {:  
                                                                                                            RESULT=new Comentarios(Comentarios.Tipo_Comentario.COMENTARIO_MILTILINEA, a);
                                                                                                        :}
               |error PTCOMA{:ErroresSintacticos.add(new ErrorLenguaje("Sintáctico","Existe un error sintactico,  carácter recuperado: "+auxerror,auxfila,auxcolumna));:}
;
CONDICIONAL_SI::=RSI CONDICION:a RENTONCES LOCAL:b RFINSI                                               {:  
                                                                                                            RESULT= new Si((Instruccion) a, (LinkedList) b);
                                                                                                        :}                                
                |RSI CONDICION:a RENTONCES LOCAL:b LISTA_OSI:l RFINSI                                   {:  
                                                                                                            RESULT= new Si((LinkedList) b,(Operacion) a, (LinkedList) l);
                                                                                                        :}     
                |RSI CONDICION:a RENTONCES LOCAL:b LISTA_OSI:l RDELOCONTRARIO LOCAL:c RFINSI            {:  
                                                                                                            RESULT= new Si((Instruccion) a,(LinkedList) b, (LinkedList) l, (LinkedList) c);
                                                                                                        :}
                |RSI CONDICION:a RENTONCES LOCAL:b RDELOCONTRARIO LOCAL:c RFINSI                        {:  
                                                                                                            RESULT= new Si((Instruccion) a,(LinkedList) b, (LinkedList) c);
                                                                                                        :}
;
LISTA_OSI::=LISTA_OSI:l ROSI CONDICION:c RENTONCES LOCAL:d                                              {:  
                                                                                                            RESULT = new LinkedList<>();
                                                                                                            for (int i = 0; i < l.size(); i++) {
                                                                                                                RESULT.add(l.get(i));
                                                                                                            }
                                                                                                            RESULT.add(new Osi((Instruccion) c, (LinkedList) d));
                                                                                                        :} 
            |ROSI CONDICION:e RENTONCES LOCAL:f                                                         {:  
                                                                                                            RESULT= new LinkedList<>();
                                                                                                            RESULT.add(new Osi((Instruccion) e, (LinkedList) f));
                                                                                                        :}
;
SELECCION_MULTIPLE::=RSEGUN EXPRESION:a RHACER LISTA_VALORENTONCES:l RFINSEGUN                          {:  
                                                                                                            RESULT= new SeleccionMultiple((Instruccion)a, (LinkedList) l);
                                                                                                        :}
                    |RSEGUN EXPRESION:a RHACER LISTA_VALORENTONCES:l RDELOCONTRARIO RENTONCES LOCAL:b RFINSEGUN{:  
                                                                                                            RESULT = new SeleccionMultiple((Instruccion)a, (LinkedList)l, (LinkedList) b);
                                                                                                        :}
;
LISTA_VALORENTONCES::=LISTA_VALORENTONCES:l INTABRE EXPRESION:e INTCIERRA RENTONCES LOCAL:a             {:  
                                                                                                            RESULT= new LinkedList<>();
                                                                                                            for (int i = 0; i < l.size(); i++) {
                                                                                                                RESULT.add(l.get(i));
                                                                                                            }
                                                                                                            RESULT.add(new Case((Instruccion) e, (LinkedList) a));
                                                                                                        :}
                     |INTABRE EXPRESION:e INTCIERRA RENTONCES LOCAL:a                                   {:  
                                                                                                            RESULT= new LinkedList<>();
                                                                                                            RESULT.add(new Case((Instruccion) e, (LinkedList) a));
                                                                                                        :}
;
CICLO_PARA::=RPARA IDENTIFICADOR:a FLECHA EXPRESION:b RHASTA EXPRESION:c RHACER LOCAL:d RFINPARA        {:  
                                                                                                            RESULT= new Para(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR), (Instruccion) b, (Instruccion) c, (LinkedList) d);
                                                                                                        :}
            |RPARA IDENTIFICADOR:a FLECHA EXPRESION:b RHASTA EXPRESION:c RHACER RFINPARA                {:  
                                                                                                            RESULT= new Para(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR), (Instruccion) b, (Instruccion) c);
                                                                                                        :}
            |RPARA IDENTIFICADOR:a FLECHA EXPRESION:b RHASTA EXPRESION:c RCONINCREMENTAL EXPRESION:d RHACER LOCAL:e RFINPARA {:  
                                                                                                            RESULT= new Para(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR), (Instruccion) b, (Instruccion) c, (Instruccion) d,(LinkedList) e);
                                                                                                        :}
            |RPARA IDENTIFICADOR:a FLECHA EXPRESION:b RHASTA EXPRESION:c RCONINCREMENTAL EXPRESION:d RHACER RFINPARA {:  
                                                                                                            RESULT= new Para(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR), (Instruccion) b, (Instruccion) c, (Instruccion) d);
                                                                                                        :}
;
CICLO_MIENTRAS::=RMIENTRAS CONDICION:a RHACER LOCAL:b RFINMIENTRAS                                      {:  
                                                                                                            RESULT= new Mientras((Instruccion) a,(LinkedList) b);
                                                                                                        :}
                |RMIENTRAS CONDICION:a RHACER RFINMIENTRAS                                              {:  
                                                                                                            RESULT= new Mientras((Instruccion) a);
                                                                                                        :}
;
CICLO_REPETIR::=RREPETIR LOCAL:a RHASTAQUE CONDICION:b                                                  {:  
                                                                                                            RESULT= new Repetir((Instruccion) b,(LinkedList) a);
                                                                                                        :}
               |RREPETIR RHASTAQUE CONDICION:a                                                          {:  
                                                                                                            RESULT= new Repetir((Instruccion) a);
                                                                                                        :}

;
EJECUTAR::=REJECUTAR IDENTIFICADOR:a PARIZQ PARDER PTCOMA                                               {:  
                                                                                                            RESULT= new Ejecutar(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR),Ejecutar.Tipo_Variable.EJECUTAR);
                                                                                                        :}
           |REJECUTAR IDENTIFICADOR:a PARIZQ INSERCION_PARAMETROS:l PARDER PTCOMA                       {:  
                                                                                                            RESULT= new Ejecutar(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR),Ejecutar.Tipo_Variable.EJECUTAR,(LinkedList) l);
                                                                                                        :}
           
;
EJECUTAR_2::=REJECUTAR IDENTIFICADOR:a PARIZQ PARDER                                                    {:  
                                                                                                            RESULT= new Ejecutar(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR),Ejecutar.Tipo_Variable.EXPRESION);
                                                                                                        :}
            |REJECUTAR IDENTIFICADOR:a PARIZQ INSERCION_PARAMETROS:l PARDER                             {:  
                                                                                                            RESULT= new Ejecutar(new Operacion(a,Operacion.Tipo_operacion.IDENTIFICADOR),Ejecutar.Tipo_Variable.EXPRESION,(LinkedList) l);
                                                                                                        :}
            
;
INSERCION_PARAMETROS::=INSERCION_PARAMETROS:l COMA EXPRESION:e                                          {:  
                                                                                                            RESULT = new LinkedList<>();
                                                                                                            for (int i = 0; i < l.size(); i++) {
                                                                                                                RESULT.add(l.get(i));
                                                                                                            }
                                                                                                            RESULT.add((Instruccion) e);
                                                                                                        :}
                      |EXPRESION:e                                                                      {:  
                                                                                                            RESULT= new LinkedList<>();
                                                                                                            RESULT.add((Instruccion) e);
                                                                                                        :}
;
IMPRESION::=RIMPRIMIR EXPRESION:a PTCOMA                                                                {:  
                                                                                                            Main.importacion_print = true;
                                                                                                            RESULT= new Impresion(Impresion.Tipo_Impresion.SIN_SALTO,(Instruccion) a);
                                                                                                        :}
           
;
IMPRESION_CONSALTO::= RIMPRIMIRNL EXPRESION:a PTCOMA                                                    {:  
                                                                                                            Main.importacion_print = true;
                                                                                                            RESULT= new Impresion(Impresion.Tipo_Impresion.CON_SALTO,(Instruccion) a);
                                                                                                        :}
                     
;