package analizadores; 
import java_cup.runtime.*;

parser code 
{:
    /**
     * Método al que se llama automáticamente ante algún error sintactico.
     **/ 
    public void syntax_error(Symbol s){ 
        System.out.println("Error Sintáctico en la Línea " + (s.left) +
        " Columna "+s.right+ ". No se esperaba este componente: " +s.value+"."); 
    } 

    /**
     * Método al que se llama automáticamente ante algún error sintáctico 
     * en el que ya no es posible una recuperación de errores.
     **/ 
    public void unrecovered_syntax_error(Symbol s) throws java.lang.Exception{ 
        System.out.println("Error síntactico irrecuperable en la Línea " + 
        (s.left)+ " Columna "+s.right+". Componente " + s.value + 
        " no reconocido."); 
    }  
:} 

action code
{: :}

terminal String RINICIO,RFIN,RMETODO,RFINMETODO,RFUNCION,RFINFUNCION,RCONPARAMETROS,RRETORNAR,RINGRESAR,RCOMO,RCONVALOR,RSI,RENTONCES,ROSI,RDELOCONTRARIO,RFINSI,RSEGUN,RHACER,RFINSEGUN;
terminal String RPARA,RHASTA,RCONINCREMENTAL,RFINPARA,RMIENTRAS,RFINMIENTRAS,RREPETIR,RHASTAQUE,REJECUTAR,RIMPRIMIR,RIMPRIMIRNL;
terminal String IDENTIFICADOR;
terminal String ENTERO;
terminal String CARASCCI;
terminal String CADENA;
terminal String CARACTER;
terminal String DECIMAL;
terminal String SUMA,RESTA,MULTIPLICACION,DIVIDIR,MODU,POTENCIA;
terminal String RMAYOR,RMENOR,RMAYOROIGUAL,RMENOROIGUAL,RESIGUAL,RESDIFERENTE,ROR,RAND,RNOT;
terminal String RNUMERO,RCADENA,RBOOLEAN,RCARACTER;
terminal String RVERDADERO,RFALSO;
terminal String PARIZQ,PARDER,INTABRE,INTCIERRA,FLECHA,PTCOMA,COMA,CORIZQ,CORDER;

non terminal INICIO;
non terminal INSTRUCCIONES;
non terminal INSTRUCCION;
non terminal DECLARACION;
non terminal LISTA_IDENTIFICADORES;
non terminal DECLARACIONyASIGNACION;
non terminal ASIGNACION;
non terminal EXPRESION;
non terminal TIPODATO;
non terminal GLOBAL;
non terminal FUNCION;
non terminal METODO;
non terminal LISTA_PARAMETROS;
non terminal ENTORNO_LOCAL;
non terminal CONDICIONAL_SI;
non terminal CONDICION;
non terminal LOCAL;
non terminal LISTA_OSI;
non terminal SELECCION_MULTIPLE;
non terminal LISTA_VALORENTONCES;
non terminal CICLO_PARA;
non terminal CICLO_MIENTRAS;
non terminal CICLO_REPETIR;
non terminal EJECUTAR;
non terminal IMPRESION;
non terminal IMPRESION_CONSALTO;

precedence left SUMA,RESTA;
precedence left MULTIPLICACION,DIVIDIR;
precedence left POTENCIA,MODU;

//-------------------------------------------GRAMATICA SINTACTICA-------------------------------------------------
start with INICIO; 

INICIO::=INSTRUCCIONES;

INSTRUCCIONES::=INSTRUCCION INSTRUCCIONES                     
                  |INSTRUCCION
                  |error INSTRUCCIONES
; 

INSTRUCCION::=GLOBAL
             |DECLARACION
             |FUNCION
             |METODO
;
GLOBAL::=RINICIO ENTORNO_LOCAL RFIN
;
DECLARACION::=RINGRESAR LISTA_IDENTIFICADORES RCOMO RNUMERO PTCOMA
             |RINGRESAR LISTA_IDENTIFICADORES RCOMO RCADENA PTCOMA
             |RINGRESAR LISTA_IDENTIFICADORES RCOMO RBOOLEAN PTCOMA
             |RINGRESAR LISTA_IDENTIFICADORES RCOMO RCARACTER PTCOMA
             |DECLARACIONyASIGNACION
;
LISTA_IDENTIFICADORES::=LISTA_IDENTIFICADORES COMA IDENTIFICADOR
                       |IDENTIFICADOR
;
DECLARACIONyASIGNACION::=RINGRESAR LISTA_IDENTIFICADORES RCOMO TIPODATO RCONVALOR EXPRESION PTCOMA;
EXPRESION::=ENTERO
            |DECIMAL
            |CADENA
            |CARACTER
            |CARASCCI
            |RVERDADERO
            |RFALSO
            |IDENTIFICADOR
            |PARIZQ EXPRESION PARDER
            |EXPRESION SUMA EXPRESION
            |EXPRESION RESTA EXPRESION
            |EXPRESION MULTIPLICACION EXPRESION
            |EXPRESION DIVIDIR EXPRESION
            |EXPRESION POTENCIA CORIZQ EXPRESION CORDER
            |EXPRESION MODU EXPRESION
;
TIPODATO::=RNUMERO
          |RCARACTER
          |RBOOLEAN
          |RCADENA
;
ASIGNACION::=LISTA_IDENTIFICADORES FLECHA EXPRESION PTCOMA;
FUNCION::=RFUNCION IDENTIFICADOR TIPODATO LOCAL RRETORNAR CONDICION PTCOMA RFINFUNCION
         |RFUNCION IDENTIFICADOR TIPODATO RRETORNAR CONDICION PTCOMA RFINFUNCION
         |RFUNCION IDENTIFICADOR TIPODATO RCONPARAMETROS PARIZQ LISTA_PARAMETROS PARDER LOCAL RRETORNAR CONDICION PTCOMA RFINFUNCION
         |RFUNCION IDENTIFICADOR TIPODATO RCONPARAMETROS PARIZQ LISTA_PARAMETROS PARDER RRETORNAR CONDICION PTCOMA RFINFUNCION
;
METODO::=RMETODO IDENTIFICADOR LOCAL RFINMETODO
        |RMETODO IDENTIFICADOR RFINMETODO
        |RMETODO IDENTIFICADOR RCONPARAMETROS PARIZQ LISTA_PARAMETROS PARDER LOCAL RFINMETODO
        |RMETODO IDENTIFICADOR RCONPARAMETROS PARIZQ LISTA_PARAMETROS PARDER RFINMETODO
;
LISTA_PARAMETROS::=LISTA_PARAMETROS COMA IDENTIFICADOR TIPODATO
                  |IDENTIFICADOR TIPODATO
;
LOCAL::=LOCAL ENTORNO_LOCAL
       |ENTORNO_LOCAL
;
ENTORNO_LOCAL::=ASIGNACION
               |DECLARACION
               |CONDICIONAL_SI
               |SELECCION_MULTIPLE
               |CICLO_PARA
               |CICLO_MIENTRAS
               |CICLO_REPETIR
               |EJECUTAR
               |IMPRESION
               |IMPRESION_CONSALTO
;
CONDICIONAL_SI::=RSI CONDICION RENTONCES LOCAL RFINSI
                |RSI CONDICION LISTA_OSI RFINSI
                |RSI CONDICION LISTA_OSI RDELOCONTRARIO LOCAL RFINSI
                |RSI CONDICION LOCAL RDELOCONTRARIO LOCAL RFINSI
;
CONDICION::=EXPRESION
           |EXPRESION RMAYOR EXPRESION
           |EXPRESION RMENOR EXPRESION
           |EXPRESION RMAYOROIGUAL EXPRESION
           |EXPRESION RMENOROIGUAL EXPRESION
           |EXPRESION RESIGUAL EXPRESION
           |EXPRESION RESDIFERENTE EXPRESION
           |RNOT EXPRESION
           |EXPRESION RAND EXPRESION
           |EXPRESION ROR EXPRESION
;
LISTA_OSI::=LISTA_OSI ROSI CONDICION RENTONCES LOCAL
            |LOCAL ROSI CONDICION RENTONCES LOCAL
;
SELECCION_MULTIPLE::=RSEGUN EXPRESION RHACER LISTA_VALORENTONCES RFINSEGUN
                    |RSEGUN EXPRESION RHACER LISTA_VALORENTONCES RDELOCONTRARIO RENTONCES LOCAL RFINSEGUN
;
LISTA_VALORENTONCES::=LISTA_VALORENTONCES INTABRE EXPRESION INTCIERRA RENTONCES LOCAL
                     |INTABRE EXPRESION INTCIERRA RENTONCES LOCAL
;
CICLO_PARA::=RPARA IDENTIFICADOR FLECHA EXPRESION RHASTA EXPRESION RHACER LOCAL RFINPARA
            |RPARA IDENTIFICADOR FLECHA EXPRESION RHASTA EXPRESION RHACER RFINPARA
            |RPARA IDENTIFICADOR FLECHA EXPRESION RHASTA EXPRESION RCONINCREMENTAL EXPRESION RHACER LOCAL RFINPARA
            |RPARA IDENTIFICADOR FLECHA EXPRESION RHASTA EXPRESION RCONINCREMENTAL EXPRESION RHACER RFINPARA
;
CICLO_MIENTRAS::=RMIENTRAS CONDICION RHACER LOCAL RFINMIENTRAS
                |RMIENTRAS CONDICION RHACER RFINMIENTRAS
;
CICLO_REPETIR::=RREPETIR LOCAL RHASTAQUE CONDICION
               |RREPETIR RHASTAQUE CONDICION
;
EJECUTAR::=REJECUTAR IDENTIFICADOR PARIZQ PARDER PTCOMA
           |REJECUTAR IDENTIFICADOR PARIZQ LISTA_PARAMETROS PARDER PTCOMA
;
IMPRESION::=RIMPRIMIR EXPRESION PTCOMA;
IMPRESION_CONSALTO::= RIMPRIMIRNL EXPRESION PTCOMA;